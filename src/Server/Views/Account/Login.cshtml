@using Microsoft.Extensions.Primitives
@using Server.Services
@inject LocalizationService T
@{
    ViewData["Title"] = "Login";
    var returnUrl = ViewData["ReturnUrl"] as string;
}

<div class="text-center">
    <h1>Login</h1>
    <form asp-action="Login" method="post" class="mt-4" style="max-width: 400px; margin: auto;">
        <div class="form-group mb-3">
            @if (Context.Request.Query.TryGetValue("ReturnUrl", out StringValues returnUrl))
            {
                <input type="hidden" name="ReturnUrl" value="@(returnUrl)" />
            }
            <label for="username" class="form-label">@T["Username"]</label>
            <input autofocus type="text" class="form-control" id="username" name="username" autocomplete="username" required>
        </div>

        <div class="form-group mb-3">
            <label for="password" class="form-label">@T["Password"]</label>
            <input type="password" class="form-control" id="password" name="password" autocomplete="current-password" required>
        </div>

        <button type="submit" class="btn btn-primary w-100">@T["Login"]</button>

        @if (!ViewData.ModelState.IsValid)
        {
            <p style="color:red">Invalid username or password</p>
        }
    </form>
</div>